# 8.0 NVVC Complier

In this unit we will take a brief look at the compilation process for a CUDA program with the NVVC compiler.

## 8.1 What is NVVC

`nvvc` is the NVIDIA CUDA compiler driver. It is a wrapper around the host compiler (e.g. `gcc`, `cl`, `clang`) and the CUDA compiler (`nvcc`). It is used to compile CUDA code and link it to the host code.

## 8.2 How to use NVVC

To compile a CUDA program with `nvcc` you can use the following command:

```bash
nvcc -o output_file input_file.cu
```

This command will compile the `input_file.cu` and create an executable called `output_file`.

## 8.3 NVVC Options

`nvcc` has many options that you can use to control the compilation process. Here are some of the most common options:

- `-o` : Set the output file name.
- `-arch` : Set the architecture for the GPU.
- `-g` : Generate debug information.
- `-G` : Generate debug information for device code.
- `-Xcompiler` : Pass options to the host compiler.
- `-Xptxas` : Pass options to the PTX assembler.
- `-Xcudafe` : Pass options to the CUDA front-end.
- `-Xnvlink` : Pass options to the linker.

For a full list of options you can use the following command:

```bash
nvcc --help
```

Flag for profiling:

```
nvcc -lineinfo
```
## 8.4 Compilation Process

The compilation process for a CUDA program with `nvcc` is as follows:

1. The host code is compiled with the host compiler.
2. The device code is compiled with the CUDA compiler.
3. The host and device code are linked together with the linker.


![nvvc](/images/17_image.png)
As we can see in the diagram above, given a file `.cu` the`nvvc` compiler separate the code into function that will be compiled using the host complier (function that are not marked or use the `__host__` marker) and function that will be compiled using the device compiler (function that are marked or use the  `__device__` or `__global__` marker). Then the host device will be compiled into the host assembly using the available host complier (i.e. `gcc`, `cl` etc.) into `x86` or `ARM` assembly code. The device code will be compiled into `PTX` assembly code. Then the `PTX` assembly code will be compiled into `SASS` assembly code. Finally the `SASS` assembly code will be linked with the host assembly code to create the final executable.

### 8.4.1 PTX Assembly

`PTX` stands for Parallel Thread Execution. It is an intermediate assembly language that is used by the CUDA compiler to generate machine code for the GPU. The `PTX` assembly code is architecture-independent and can be compiled into machine code for any GPU architecture.

### 8.4.2 SASS Assembly

`SASS` stands for Shader Assembly. It is the machine code that is generated by the CUDA compiler from the `PTX` assembly code. The `SASS` assembly code is architecture-specific and is executed by the GPU.

